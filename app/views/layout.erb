<html>
<head>
  <title>Reddit clone - The failed experiment they never deployed</title>

  <!-- Stylesheets -->
  <link href="<%= url('/css/bootstrap.min.css') %>" rel="stylesheet" type="text/css" />
  <link href="<%= url('/css/style.css') %>" rel="stylesheet" type="text/css" />

  <!-- Javascript - jQuery and Bootstrap -->
  <script src="<%= url('/js/jquery-1.12.0.min.js') %>"></script>
  <script src="<%= url('/js/bootstrap.min.js') %>"></script>
  <script src="<%= url('/js/angular.min.js') %>"></script>

</head>
<body ng-app>

  <div class="container">

    <a href="/"><button>Home</button></a>

    <!-- Messages when the user signups, logins, and logouts (successful or unsuccessful) -->
    <% unless locals.empty? %>
      <%= message %>
    <% end %>

    <!-- If user is logged in, should logout and profile link, otherwise show signup/login button -->
    <% if Helpers.is_logged_in?(session) %>
      <div id="user-options">
        <h4><%= Helpers.current_user(session).name %></h4>
        <a href="/u/<%= Helpers.current_user(session).name %>"><button>Profile</button></a>
        <a href="/r/subreddit/new"><button>New Subreddit</button></a>
        <a href="/posts/new"><button>New Post</button></a>
        <form method="post" action="/logout">
          <input type="submit" value="Log Out">
        </form>
      </div>

    <% else %>
     <button class="toggle-ua-form">Sign up / Login</button>
    <% end %>

    <!-- User Authentication form - signups and logins -->
    <!-- Toggles with Signup/Login button or the X (insde ua_form) -->
     <div id="ua-form">
      <%= erb :ua_form %>
     </div>

    <br><br>

    <!-- Template -->
    <%= yield %>

  </div> <!-- .container  -->

  <!-- Javascript for toggling ua-form -->
  <script type="text/javascript">
    $(function(){
      $("#ua-form").hide();
    });

    $(".toggle-ua-form").click(function(){
      $( "#ua-form").toggle();
    });
  </script>

</body> 
</html>